<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>💖 Birlikte Yazılacak Hikâye (Tek Dosya • Sessiz)</title>
  <meta name="description" content="Cem'in Ayşe'ye çıkma teklifi için interaktif mini hikâye (tek dosya sürüm)" />
  <style>
    :root{
      --bg1:#ff9a9e; --bg2:#fad0c4; /* base pink */
      --park1:#a7f3d0; --park2:#34d399; /* green */
      --lake1:#93c5fd; --lake2:#3b82f6; /* blue */
      --book1:#fde68a; --book2:#f59e0b; /* amber */
    }
    *{box-sizing:border-box} html,body{margin:0; padding:0}
    body{ font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif; min-height:100vh; overflow:hidden }
    /* THEME BACKGROUNDS */
    body.theme-base{ background:linear-gradient(135deg,var(--bg1),var(--bg2)); }
    body.theme-park{ background:linear-gradient(135deg,var(--park1),var(--park2)); }
    body.theme-lake{ background:linear-gradient(135deg,var(--lake1),var(--lake2)); }
    body.theme-book{ background:linear-gradient(135deg,var(--book1),var(--book2)); }

    /* LAYER STACK */
    .layer{ position:fixed; inset:0; pointer-events:none }
    /* STARS */
    #stars{ z-index:0 }
    .star{ position:absolute; width:2px; height:2px; background:rgba(255,255,255,.9); border-radius:50%; opacity:.6; animation: twinkle 2.2s infinite ease-in-out }
    @keyframes twinkle{ 0%,100%{opacity:.2; transform:scale(.9)} 50%{opacity:1; transform:scale(1.25)} }

    /* WAVES */
    #waves{ z-index:1; opacity:.18 }
    .wave{ position:absolute; left:-50%; width:200%; height:40%; border-radius:45%; filter:blur(20px); animation: swell 12s ease-in-out infinite }
    .wave.w1{ bottom:-10%; background:radial-gradient(circle at 30% 50%,#fff,transparent 60%) }
    .wave.w2{ bottom:-18%; background:radial-gradient(circle at 70% 50%,#fff,transparent 60%); animation-duration:16s; animation-direction:reverse }
    @keyframes swell{ 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-18px) } }

    /* AURORA */
    #aurora{ z-index:2; mix-blend-mode:screen; opacity:.25 }
    .aur{ position:absolute; width:50vw; height:50vh; filter:blur(40px); border-radius:50%; animation: drift 18s linear infinite }
    .aur.a1{ top:10%; left:10%; background:radial-gradient(circle,#fff 0%, rgba(255,255,255,0) 60%) }
    .aur.a2{ bottom:10%; right:5%; background:radial-gradient(circle,#fff 0%, rgba(255,255,255,0) 60%); animation-duration:22s }
    @keyframes drift{ from{ transform:translate(-10%,0)} to{ transform:translate(10%,0)} }

    /* FLOATERS */
    #floaters{ z-index:3 }
    .petal{ position:absolute; font-size:16px; opacity:.85; animation: fall 8s linear forwards }
    @keyframes fall{ from{ transform:translateY(-10vh) rotate(0)} to{ transform:translateY(110vh) rotate(360deg); opacity:.2 } }
    .butterfly, .bird{ position:absolute; font-size:22px; opacity:.9; animation: fly 12s linear forwards }
    @keyframes fly{ from{ transform:translateX(-10vw) translateY(0)} to{ transform:translateX(110vw) translateY(-10vh) } }

    /* ILLUSTRATIONS */
    #illus{ z-index:2; opacity:.15 }
    .moon{ position:absolute; top:6%; right:6%; width:70px; height:70px; border-radius:50%; background:radial-gradient(circle at 30% 30%, #fff, #ddd 60%, transparent 62%); box-shadow:0 0 20px rgba(255,255,255,.8) }
    .tree{ position:absolute; bottom:4%; left:6%; width:120px; height:120px; background:conic-gradient(from 0deg,#14532d 0 25%,#166534 25% 50%,#047857 50% 75%,#065f46 75% 100%); border-radius:0 0 80px 80px / 0 0 100px 100px; filter:blur(1px) }
    .flower{ position:absolute; bottom:6%; right:10%; font-size:40px }

    /* CARD */
    .frame{ position:relative; z-index:5; display:flex; align-items:center; justify-content:center; min-height:100vh; padding:24px }
    .container{ background:white; padding:2rem; border-radius:1.5rem; box-shadow:0 20px 40px rgba(0,0,0,0.18); max-width:760px; width:100% }
    .title{ font-size:2rem; font-weight:700; color:#8b5cf6; text-align:center; margin-bottom:.75rem; animation:bounce 2.4s infinite }
    @keyframes bounce{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-6px)} }
    .text{ font-size:1.2rem; text-align:center; color:#1f2937; min-height:102px; margin-bottom:10px }
    .extra{ font-size:1rem; font-style:italic; color:#6b7280; text-align:center; margin-bottom:1rem; min-height:36px }
    .choices{ display:grid; gap:12px; justify-items:center; margin-bottom:.5rem }
    .btn{ padding:.9rem 1.35rem; border-radius:1rem; background:#f3f4f6; font-weight:600; transition:.25s; border:1px solid #e5e7eb; cursor:pointer }
    .btn:hover{ background:#e5e7eb; transform:translateY(-2px) }
    .yes{ background:#8b5cf6; color:white; border-color:#7c3aed }
    .yes:hover{ background:#7c3aed; transform:scale(1.06) }
    .no{ position:relative; background:#f87171; color:white; border-color:#ef4444 }
    .back-btn{ margin-top:.25rem; font-size:.9rem; color:#6b7280; cursor:pointer; text-decoration:underline; text-align:center }
    .back-btn:hover{ color:#111827 }

    /* INTERACTIONS */
    .click-heart{ position:fixed; font-size:18px; pointer-events:none; animation: pop 900ms ease forwards; z-index:10 }
    @keyframes pop{ 0%{ transform:scale(.6); opacity:.8 } 70%{ transform:scale(1.6); opacity:1 } 100%{ transform:scale(.8) translateY(-20px); opacity:0 } }
    .trail{ position:fixed; width:6px; height:6px; background:white; border-radius:50%; opacity:.9; pointer-events:none; filter:blur(.5px); animation: fade 600ms linear forwards; z-index:10 }
    @keyframes fade{ to{ transform:translateY(-12px); opacity:0 } }

    /* SIMPLE CONFETTI (emoji) */
    .confetti{ position:fixed; z-index:12; font-size:18px; pointer-events:none; animation: conf 1200ms ease forwards }
    @keyframes conf{ 0%{ transform:translate(-50%,-50%) scale(.8); opacity:1 } 100%{ transform:translate(-50%,-140%) scale(.8); opacity:0 } }
  </style>
</head>
<body class="theme-base">
  <!-- BACKGROUND EFFECTS -->
  <div class="layer" id="stars"></div>
  <div class="layer" id="aurora">
    <div class="aur a1"></div>
    <div class="aur a2"></div>
  </div>
  <div class="layer" id="waves">
    <div class="wave w1"></div>
    <div class="wave w2"></div>
  </div>

  <!-- FLOATERS -->
  <div class="layer" id="floaters"></div>

  <!-- ILLUSTRATIONS -->
  <div class="layer" id="illus">
    <div class="moon"></div>
    <div class="tree"></div>
    <div class="flower">🌸</div>
  </div>

  <!-- MAIN CARD -->
  <div class="frame">
    <div class="container">
      <h1 class="title">💖 Birlikte Yazılacak Hikâye 💖</h1>
      <div id="story" class="text"></div>
      <div id="extra" class="extra"></div>
      <div id="choices" class="choices"></div>
      <div id="backBtn" class="back-btn hidden">← Geri dön</div>
    </div>
  </div>

  <script>
    /* STORY DATA */
    const steps=[
      {id:"intro", theme:"base", text:"Bir gün batımında Cem ve Ayşe el ele yürümeye başlıyor. Önlerinde üç yol var: gizemli bir park, ışıldayan bir göl ve küçük bir kitapçı. Hangisini seçersiniz?", choices:[{label:"Park 🌳", next:"park"},{label:"Göl 🌊", next:"gol"},{label:"Kitapçı 📚", next:"kitapci"}]},
      {id:"park", theme:"park", text:"Cem ve Ayşe parkta kuş sesleri eşliğinde yürüyüş yapıyor. Bank mı, çiçekler mi?", choices:[{label:"Bank 🌿", next:"bank"},{label:"Çiçekler 🌸", next:"cicek"}]},
      {id:"gol", theme:"lake", text:"Gölde ay ışığı parlıyor. Sessizce mi oturalım, yoksa dilek mi tutalım?", choices:[{label:"Sessizce oturalım 🌙", next:"sessiz"},{label:"Dilek tutalım ⭐", next:"dilek"}]},
      {id:"kitapci", theme:"book", text:"Küçük kitapçının raflarında dolaşırken Cem bir aşk romanı buluyor, Ayşe ise şiir kitabına yöneliyor. Hangisini alalım?", choices:[{label:"Aşk romanı 💕", next:"roman"},{label:"Şiir kitabı ✍️", next:"siir"}]},
      {id:"bank", theme:"park", text:"Cem ve Ayşe yan yana oturuyor, kalpleri aynı ritimde. Sessizlikte Cem’in söylemek istediği bir şey var.", choices:[{label:"Söyle… 💭", next:"itirafHazirlik"}]},
      {id:"cicek", theme:"park", text:"Ayşe çiçeklere hayran kalıyor, Cem ise ona küçük bir buket uzatıyor.", choices:[{label:"O anı yakala 💐", next:"itirafHazirlik"}]},
      {id:"sessiz", theme:"lake", text:"Sessizlikte sadece kalplerinin sesi var. Cem’in içinde sakladığı şey büyüyor.", choices:[{label:"Dayanamıyorum, söyle!", next:"itirafHazirlik"}]},
      {id:"dilek", theme:"lake", text:"İkisi gözlerini kapatıp dilek tutuyor. Gözlerini açtıklarında birbirlerine bakıyorlar.", choices:[{label:"Kalbim hazır 💖", next:"itirafHazirlik"}]},
      {id:"roman", theme:"book", text:"Romandaki aşk hikâyesi, Cem ve Ayşe'yi birbirine daha da yakınlaştırıyor.", choices:[{label:"Kendi hikâyemizi yazalım 📖", next:"itirafHazirlik"}]},
      {id:"siir", theme:"book", text:"Ayşe şiir kitabından bir dize okuyor, Cem’in gözleri ışıldıyor.", extra:"\"Seninle her yer cennet, sensiz dünya zindan.\"", choices:[{label:"Bu daha başlangıç ✨", next:"itirafHazirlik"}]},
      {id:"itirafHazirlik", theme:"base", text:"Cem’in kalbi hızla atıyor. Söylemek istediği şey artık dudaklarında.", choices:[{label:"Dinliyorum… 💌", next:"gecmis"}]},
      {id:"gecmis", theme:"base", text:"Cem: \"Ayşe, ilk tanıştığımız günü hatırlıyor musun? O an yüzümde hep bir gülümseme beliriyor.\"", choices:[{label:"Evet hatırlıyorum 💭", next:"hayal"},{label:"Biraz daha anlat ✨", next:"hayal"}]},
      {id:"hayal", theme:"base", text:"Cem: \"Bazen geleceği düşünüyorum: seyahatler, kahkahalar, uzun sohbetler… hepsi seninle güzel olacak.\"", choices:[{label:"Harika olurdu ✈️", next:"soruHazirlik"},{label:"Birlikte her şey güzel 💞", next:"soruHazirlik"}]},
      {id:"soruHazirlik", theme:"base", text:"Artık en önemli ana geldik. Cem’in söyleyeceği şey çok kıymetli.", choices:[{label:"Hazırım 💖", next:"final"}]},
      {id:"final", theme:"base", text:"Ayşe... Benimle çıkar mısın? 💖", final:true}
    ];

    let current="intro";
    const story=document.getElementById('story');
    const extra=document.getElementById('extra');
    const choices=document.getElementById('choices');
    const backBtn=document.getElementById('backBtn');
    const historyStack=[];

    function setTheme(theme){ document.body.className='theme-'+(theme||'base'); }

    function render(id, pushHistory=true){
      const step=steps.find(s=>s.id===id); if(!step) return;
      if(pushHistory) historyStack.push(current);
      current=id;
      setTheme(step.theme);
      story.textContent=step.text;
      extra.textContent=step.extra||"";
      choices.innerHTML="";
      if(step.final){
        const yes=document.createElement('button');
        yes.textContent="Evet 💘"; yes.className="btn yes";
        yes.onclick=()=>{
          fireConfetti();
          story.textContent="🎉 Ayşe 'Evet' dedi! Cem ve Ayşe artık beraber! 🎉";
          extra.textContent=""; choices.innerHTML=""; backBtn.classList.add('hidden');
        };
        const no=document.createElement('button');
        no.textContent="Hayır 😅"; no.className="btn no";
        no.onmouseover=(e)=>{ const p=choices.getBoundingClientRect(); const x=Math.random()*(p.width-100); const y=Math.random()*(p.height-40); e.target.style.position='absolute'; e.target.style.left=x+'px'; e.target.style.top=y+'px'; e.target.style.transform='scale(0.7) rotate(-8deg)'; };
        choices.appendChild(yes); choices.appendChild(no);
      } else {
        step.choices.forEach(c=>{ const b=document.createElement('button'); b.textContent=c.label; b.className='btn'; b.onclick=()=>render(c.next); choices.appendChild(b); });
      }
      backBtn.classList.toggle('hidden', historyStack.length===0);
    }
    backBtn.onclick=()=>{ if(historyStack.length>0){ const prev=historyStack.pop(); render(prev,false); } };

    /* FLOATERS */
    const floaters=document.getElementById('floaters');
    const petals=['🌸','🌺','🌼','🌷'];
    function spawnPetal(){ const el=document.createElement('div'); el.className='petal'; el.textContent=petals[Math.floor(Math.random()*petals.length)]; el.style.left=Math.random()*100+'vw'; el.style.top='-5vh'; el.style.animationDuration=(6+Math.random()*4)+'s'; floaters.appendChild(el); setTimeout(()=>el.remove(),10000); }
    function spawnButterfly(){ const el=document.createElement('div'); el.className='butterfly'; el.textContent='🦋'; el.style.top=(20+Math.random()*50)+'vh'; el.style.left='-5vw'; el.style.animationDuration=(10+Math.random()*6)+'s'; floaters.appendChild(el); setTimeout(()=>el.remove(),16000); }
    function spawnBird(){ const el=document.createElement('div'); el.className='bird'; el.textContent='🐦'; el.style.top=(10+Math.random()*30)+'vh'; el.style.left='-8vw'; el.style.animationDuration=(9+Math.random()*5)+'s'; floaters.appendChild(el); setTimeout(()=>el.remove(),15000); }
    setInterval(spawnPetal, 900);
    setInterval(()=>{ if(Math.random()<.6) spawnButterfly(); }, 5000);
    setInterval(()=>{ if(Math.random()<.5) spawnBird(); }, 6000);

    /* STARS */
    const stars=document.getElementById('stars');
    for(let i=0;i<120;i++){ const s=document.createElement('div'); s.className='star'; s.style.left=Math.random()*100+'vw'; s.style.top=Math.random()*100+'vh'; s.style.animationDelay=(Math.random()*2)+'s'; stars.appendChild(s); }

    /* INTERACTIONS */
    function clickHeart(x,y){ const h=document.createElement('div'); h.className='click-heart'; h.style.left=x+'px'; h.style.top=y+'px'; h.textContent='💖'; document.body.appendChild(h); setTimeout(()=>h.remove(),900); }
    function trail(x,y){ const t=document.createElement('div'); t.className='trail'; t.style.left=x+'px'; t.style.top=y+'px'; document.body.appendChild(t); setTimeout(()=>t.remove(),600); }
    window.addEventListener('click',(e)=>{ clickHeart(e.clientX,e.clientY); });

    window.addEventListener('mousemove',(e)=>{ trail(e.clientX,e.clientY); });
    window.addEventListener('touchmove',(e)=>{ const t=e.touches[0]; if(t) trail(t.clientX,t.clientY); }, {passive:true});

    /* SIMPLE CONFETTI using emojis */
    const confettiEmojis=['💖','✨','🎉','💞','🌸'];
    function fireConfetti(){
      for(let i=0;i<60;i++){
        const c=document.createElement('div');
        c.className='confetti';
        c.textContent=confettiEmojis[i%confettiEmojis.length];
        const x=window.innerWidth/2 + (Math.random()*160-80);
        const y=window.innerHeight*0.7 + (Math.random()*60-30);
        c.style.left=x+'px';
        c.style.top=y+'px';
        c.style.transform=`translate(-50%,-50%) rotate(${Math.random()*360}deg)`;
        c.style.fontSize=(16+Math.random()*12)+'px';
        document.body.appendChild(c);
        setTimeout(()=>c.remove(),1200);
      }
    }

    /* INIT */
    render(current,false);
  </script>
</body>
</html>
